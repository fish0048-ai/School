(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[262],{4585:(e,s,t)=>{"use strict";t.d(s,{db:()=>i,j:()=>d});var a=t(2078),l=t(2553),r=t(9390);let n=(0,a.Wp)({apiKey:"AIzaSyDD_LVP9WTmEJP1ug68ajrFqQufu65X_BA",authDomain:"cish-906-school.firebaseapp.com",projectId:"cish-906-school",storageBucket:"cish-906-school.firebasestorage.app",messagingSenderId:"795413031258",appId:"1:795413031258:web:13c9916b84c07cd4dbeb63"}),d=(0,l.xI)(n),i=(0,r.aU)(n)},4901:(e,s,t)=>{"use strict";t.d(s,{A:()=>c,AuthProvider:()=>u});var a=t(5155),l=t(2115),r=t(2553),n=t(9390),d=t(4585);let i=(0,l.createContext)(null);function u(e){let{children:s}=e,[t,u]=(0,l.useState)(null),[c,o]=(0,l.useState)(null),[h,x]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=(0,r.hg)(d.j,async e=>{if(u(e),e){var s,t,a;let l=(await (0,n.x7)((0,n.H9)(d.db,"users",e.uid))).data();o({uid:e.uid,email:null!=(s=e.email)?s:null,role:null!=(t=null==l?void 0:l.role)?t:"student",displayName:null!=(a=e.displayName)?a:null==l?void 0:l.displayName})}else o(null);x(!1)});return()=>e()},[]);let m=async(e,s)=>{await (0,r.x9)(d.j,e,s)},b=async()=>{let e=new r.HF;await (0,r.df)(d.j,e)},f=async()=>{await (0,r.CI)(d.j),o(null)};return(0,a.jsx)(i.Provider,{value:{user:t,profile:c,loading:h,signIn:m,signInWithGoogle:b,signOut:f,hasRole:function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return!!c&&s.includes(c.role)}},children:s})}function c(){let e=(0,l.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},6875:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(5155),l=t(4901);function r(){let{hasRole:e}=(0,l.A)();return e("teacher","staff")?(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-sm border-t-4 border-green-500",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:[(0,a.jsx)("i",{className:"fas fa-border-all text-green-500 mr-2"})," 座位表"]}),(0,a.jsx)("p",{className:"text-slate-500",children:"座位表網格（從 Firestore seating 讀取）"})]}):(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-sm border-t-4 border-green-500",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:[(0,a.jsx)("i",{className:"fas fa-border-all text-green-500 mr-2"})," 座位表"]}),(0,a.jsxs)("div",{className:"bg-green-50 p-6 rounded-xl border border-green-100 text-center",children:[(0,a.jsx)("i",{className:"fas fa-lock text-2xl text-green-600 mb-3"}),(0,a.jsx)("h3",{className:"font-bold text-slate-800 mb-3",children:"請登入後查看"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"座位表需具備 teacher 或 staff 權限"})]})]})}},8937:(e,s,t)=>{Promise.resolve().then(t.bind(t,6875))}},e=>{e.O(0,[399,563,320,441,255,358],()=>e(e.s=8937)),_N_E=e.O()}]);
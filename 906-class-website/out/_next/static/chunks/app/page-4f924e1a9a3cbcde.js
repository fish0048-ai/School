(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4386:(e,t,s)=>{Promise.resolve().then(s.bind(s,9547))},4585:(e,t,s)=>{"use strict";s.d(t,{db:()=>i,j:()=>r});var a=s(2078),l=s(2553),c=s(9390);let n=(0,a.Wp)({apiKey:"AIzaSyDD_LVP9WTmEJP1ug68ajrFqQufu65X_BA",authDomain:"cish-906-school.firebaseapp.com",projectId:"cish-906-school",storageBucket:"cish-906-school.firebasestorage.app",messagingSenderId:"795413031258",appId:"1:795413031258:web:13c9916b84c07cd4dbeb63"}),r=(0,l.xI)(n),i=(0,c.aU)(n)},9547:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5155),l=s(2115),c=s(2619),n=s.n(c),r=s(9390),i=s(4585);function d(e){return e?e instanceof Date?e:"object"==typeof e&&null!==e&&"toDate"in e?e.toDate():null:null}function o(){var e;let[t,s]=(0,l.useState)(null),[c,o]=(0,l.useState)([]),[x,m]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([(0,r.GG)((0,r.P)((0,r.rJ)(i.db,"countdown_events"),(0,r.My)("date","asc"),(0,r.AB)(5))),(0,r.GG)((0,r.P)((0,r.rJ)(i.db,"announcements"),(0,r.My)("date","desc"),(0,r.AB)(5)))]),a=new Date,l=e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>{let t=d(e.date);return t&&t>=a});l.length>0&&s(l[0]),o(t.docs.map(e=>({id:e.id,...e.data()})))}catch(e){console.error(e)}finally{m(!1)}})()},[]),x)return(0,a.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,a.jsx)("i",{className:"fas fa-circle-notch fa-spin text-4xl text-blue-500"})});let h=d(null==t?void 0:t.date),u=h?Math.ceil((h.getTime()-new Date().setHours(0,0,0,0))/864e5):null;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-slate-200 p-4 border-b-4 border-b-amber-400",children:[(0,a.jsxs)("p",{className:"text-xs font-bold uppercase tracking-wider text-slate-500 mb-1",children:[(0,a.jsx)("i",{className:"fas fa-graduation-cap mr-2"}),null!=(e=null==t?void 0:t.title)?e:"暫無考試"]}),(0,a.jsx)("p",{className:"text-4xl sm:text-5xl font-extrabold text-slate-800",children:null!==u?u>0?u:"0":"-"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:h?"".concat(h.getMonth()+1,"/").concat(h.getDate()):""})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 flex flex-col justify-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"906 親師平台"}),(0,a.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"親師合作，共創未來"}),(0,a.jsxs)(n(),{href:"/bulletin",className:"mt-4 inline-flex items-center text-blue-600 font-medium text-sm hover:underline",children:["查看全部公告 ",(0,a.jsx)("i",{className:"fas fa-arrow-right ml-1"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border-t-4 border-blue-500 p-4 sm:p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:[(0,a.jsx)("i",{className:"fas fa-bullhorn text-blue-500 mr-2"})," 最新公告"]}),0===c.length?(0,a.jsx)("p",{className:"text-slate-500 text-center py-8",children:"尚無公告"}):(0,a.jsx)("div",{className:"space-y-3",children:c.map(e=>(0,a.jsxs)(n(),{href:"/bulletin#".concat(encodeURIComponent(e.title)),className:"block p-4 rounded-lg bg-slate-50 hover:bg-blue-50 transition",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("h3",{className:"font-bold text-slate-800",children:e.title}),(0,a.jsx)("span",{className:"text-xs text-slate-400",children:e.date})]}),(0,a.jsx)("p",{className:"text-sm text-slate-600 mt-1 line-clamp-2",children:e.content})]},e.title))})]})]})}}},e=>{e.O(0,[399,563,320,619,441,255,358],()=>e(e.s=4386)),_N_E=e.O()}]);
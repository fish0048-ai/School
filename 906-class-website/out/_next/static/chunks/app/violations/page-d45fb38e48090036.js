(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[231],{2132:(e,s,l)=>{Promise.resolve().then(l.bind(l,4584))},4584:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>r});var t=l(5155),a=l(4901);function r(){let{hasRole:e}=(0,a.A)();return e("teacher","staff")?(0,t.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-sm border-t-4 border-yellow-500",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:[(0,t.jsx)("i",{className:"fas fa-user-shield text-yellow-500 mr-2"})," 常規紀錄"]}),(0,t.jsx)("p",{className:"text-slate-500",children:"常規列表（從 Firestore violations 讀取）"})]}):(0,t.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-sm border-t-4 border-yellow-500",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:[(0,t.jsx)("i",{className:"fas fa-user-shield text-yellow-500 mr-2"})," 常規紀錄"]}),(0,t.jsxs)("div",{className:"bg-yellow-50 p-6 rounded-xl border border-yellow-100 text-center",children:[(0,t.jsx)("i",{className:"fas fa-lock text-2xl text-yellow-600 mb-3"}),(0,t.jsx)("h3",{className:"font-bold text-slate-800 mb-3",children:"請登入後查看"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"常規紀錄需具備 teacher 或 staff 權限"})]})]})}},4585:(e,s,l)=>{"use strict";l.d(s,{db:()=>n,j:()=>d});var t=l(2078),a=l(2553),r=l(9390);let i=(0,t.Wp)({apiKey:"AIzaSyDD_LVP9WTmEJP1ug68ajrFqQufu65X_BA",authDomain:"cish-906-school.firebaseapp.com",projectId:"cish-906-school",storageBucket:"cish-906-school.firebasestorage.app",messagingSenderId:"795413031258",appId:"1:795413031258:web:13c9916b84c07cd4dbeb63"}),d=(0,a.xI)(i),n=(0,r.aU)(i)},4901:(e,s,l)=>{"use strict";l.d(s,{A:()=>u,AuthProvider:()=>o});var t=l(5155),a=l(2115),r=l(2553),i=l(9390),d=l(4585);let n=(0,a.createContext)(null);function o(e){let{children:s}=e,[l,o]=(0,a.useState)(null),[u,c]=(0,a.useState)(null),[h,x]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,r.hg)(d.j,async e=>{if(o(e),e){var s,l,t;let a=(await (0,i.x7)((0,i.H9)(d.db,"users",e.uid))).data();c({uid:e.uid,email:null!=(s=e.email)?s:null,role:null!=(l=null==a?void 0:a.role)?l:"student",displayName:null!=(t=e.displayName)?t:null==a?void 0:a.displayName})}else c(null);x(!1)});return()=>e()},[]);let m=async(e,s)=>{await (0,r.x9)(d.j,e,s)},f=async()=>{let e=new r.HF;await (0,r.df)(d.j,e)},b=async()=>{await (0,r.CI)(d.j),c(null)};return(0,t.jsx)(n.Provider,{value:{user:l,profile:u,loading:h,signIn:m,signInWithGoogle:f,signOut:b,hasRole:function(){for(var e=arguments.length,s=Array(e),l=0;l<e;l++)s[l]=arguments[l];return!!u&&s.includes(u.role)}},children:s})}function u(){let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}}},e=>{e.O(0,[399,563,320,441,255,358],()=>e(e.s=2132)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{4269:(e,s,t)=>{"use strict";function l(e){let s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return String(e||"").replace(/[&<>"']/g,e=>{var t;return null!=(t=s[e])?t:e})}t.d(s,{ZD:()=>l})},4585:(e,s,t)=>{"use strict";t.d(s,{db:()=>i,j:()=>d});var l=t(2078),a=t(2553),r=t(9390);let c=(0,l.Wp)({apiKey:"AIzaSyDD_LVP9WTmEJP1ug68ajrFqQufu65X_BA",authDomain:"cish-906-school.firebaseapp.com",projectId:"cish-906-school",storageBucket:"cish-906-school.firebasestorage.app",messagingSenderId:"795413031258",appId:"1:795413031258:web:13c9916b84c07cd4dbeb63"}),d=(0,a.xI)(c),i=(0,r.aU)(c)},7064:(e,s,t)=>{Promise.resolve().then(t.bind(t,9790))},9790:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var l=t(5155),a=t(2115),r=t(9390),c=t(4585),d=t(4269);function i(){let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(0,r.GG)((0,r.P)((0,r.rJ)(c.db,"gallery_photos"),(0,r.My)("date","desc"))).then(e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}).catch(console.error).finally(()=>i(!1))},[]);let n=e.reduce((e,s)=>{let t=s.album||"未分類";return e[t]||(e[t]=[]),e[t].push(s),e},{});return t?(0,l.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,l.jsx)("i",{className:"fas fa-circle-notch fa-spin text-4xl text-blue-500"})}):(0,l.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-sm border-t-4 border-blue-500",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-slate-800",children:[(0,l.jsx)("i",{className:"fas fa-images text-blue-500 mr-2"})," 班級相簿"]}),(0,l.jsxs)("a",{href:"#",onClick:e=>{e.preventDefault(),alert("上傳功能需連接 Apps Script，請在設定中填入 NEXT_PUBLIC_UPLOAD_API")},className:"fixed bottom-20 right-6 bg-blue-500 text-white px-4 py-2 rounded-full font-bold shadow-lg flex items-center gap-2",children:[(0,l.jsx)("i",{className:"fas fa-cloud-upload-alt"}),"上傳照片"]})]}),0===Object.keys(n).length?(0,l.jsx)("p",{className:"text-center text-slate-500 py-10",children:"尚無照片"}):(0,l.jsx)("div",{className:"space-y-6",children:Object.entries(n).map(e=>{let[s,t]=e;return(0,l.jsxs)("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[(0,l.jsxs)("div",{className:"p-4 bg-slate-50 font-bold text-slate-700 flex items-center",children:[(0,l.jsx)("i",{className:"fas fa-folder-open text-yellow-500 mr-2"}),(0,d.ZD)(s),(0,l.jsx)("span",{className:"ml-2 text-xs bg-white border border-slate-200 px-2 py-0.5 rounded-full text-slate-500",children:t.length})]}),(0,l.jsx)("div",{className:"p-4 grid grid-cols-2 md:grid-cols-3 gap-4",children:t.map(e=>(0,l.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"aspect-[4/3] bg-slate-100 rounded-lg overflow-hidden block group",children:[(0,l.jsx)("img",{src:e.url,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition"}),(0,l.jsx)("div",{className:"p-2 bg-black/50 text-white text-xs truncate",children:(0,d.ZD)(e.title||e.desc||"")})]},e.id))})]},s)})})]})}}},e=>{e.O(0,[399,563,320,441,255,358],()=>e(e.s=7064)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{4163:(e,s,t)=>{Promise.resolve().then(t.bind(t,8168))},4269:(e,s,t)=>{"use strict";function a(e){let s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return String(e||"").replace(/[&<>"']/g,e=>{var t;return null!=(t=s[e])?t:e})}t.d(s,{ZD:()=>a})},4585:(e,s,t)=>{"use strict";t.d(s,{db:()=>n,j:()=>d});var a=t(2078),l=t(2553),c=t(9390);let r=(0,a.Wp)({apiKey:"AIzaSyDD_LVP9WTmEJP1ug68ajrFqQufu65X_BA",authDomain:"cish-906-school.firebaseapp.com",projectId:"cish-906-school",storageBucket:"cish-906-school.firebasestorage.app",messagingSenderId:"795413031258",appId:"1:795413031258:web:13c9916b84c07cd4dbeb63"}),d=(0,l.xI)(r),n=(0,c.aU)(r)},8168:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(5155),l=t(2115),c=t(9390),r=t(4585),d=t(4269);function n(){let[e,s]=(0,l.useState)([]),[t,n]=(0,l.useState)("全部"),[i,o]=(0,l.useState)(!0);(0,l.useEffect)(()=>{(0,c.GG)((0,c.P)((0,c.rJ)(r.db,"announcements"),(0,c.My)("date","desc"))).then(e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}).catch(console.error).finally(()=>o(!1))},[]);let x=["全部",...new Set(e.map(e=>e.cat).filter(Boolean))],m=e.filter(e=>"全部"===t||e.cat===t);return i?(0,a.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,a.jsx)("i",{className:"fas fa-circle-notch fa-spin text-4xl text-blue-500"})}):(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-sm border-t-4 border-blue-500",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-3",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-800",children:[(0,a.jsx)("i",{className:"fas fa-bullhorn text-blue-500 mr-2"})," 班級公告"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(e=>(0,a.jsx)("button",{onClick:()=>n(e),className:"px-3 py-1 rounded-full text-sm font-bold ".concat(t===e?"bg-blue-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"),children:e},e))})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===m.length?(0,a.jsx)("p",{className:"col-span-full text-center text-slate-500 py-10",children:"無相關公告"}):m.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-slate-100 hover:shadow-md transition",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-slate-400",children:e.date}),(0,a.jsx)("span",{className:"text-xs font-bold bg-blue-50 text-blue-500 px-2 py-0.5 rounded",children:e.cat}),e.due&&(0,a.jsxs)("span",{className:"text-xs bg-slate-100 text-slate-500 px-2 py-0.5 rounded",children:["截止：",e.due]})]}),(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:(0,d.ZD)(e.title)}),(0,a.jsx)("p",{className:"text-sm text-slate-500 line-clamp-3 mb-4",children:(0,d.ZD)(e.content)}),(0,a.jsx)("span",{className:"text-blue-500 text-sm font-bold",children:"閱讀更多"})]},e.id))})]})}}},e=>{e.O(0,[399,563,320,441,255,358],()=>e(e.s=4163)),_N_E=e.O()}]);
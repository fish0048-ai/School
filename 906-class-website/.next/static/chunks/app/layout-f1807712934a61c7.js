(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{63:(e,a,l)=>{"use strict";var t=l(7260);l.o(t,"usePathname")&&l.d(a,{usePathname:function(){return t.usePathname}}),l.o(t,"useRouter")&&l.d(a,{useRouter:function(){return t.useRouter}})},3671:(e,a,l)=>{Promise.resolve().then(l.t.bind(l,3673,23)),Promise.resolve().then(l.bind(l,4615)),Promise.resolve().then(l.bind(l,4901))},3673:()=>{},4585:(e,a,l)=>{"use strict";l.d(a,{db:()=>o,j:()=>i});var t=l(2078),s=l(2553),n=l(9390);let r=(0,t.Wp)({apiKey:"AIzaSyDD_LVP9WTmEJP1ug68ajrFqQufu65X_BA",authDomain:"cish-906-school.firebaseapp.com",projectId:"cish-906-school",storageBucket:"cish-906-school.firebasestorage.app",messagingSenderId:"795413031258",appId:"1:795413031258:web:13c9916b84c07cd4dbeb63"}),i=(0,s.xI)(r),o=(0,n.aU)(r)},4615:(e,a,l)=>{"use strict";l.d(a,{default:()=>c});var t=l(5155),s=l(2619),n=l.n(s),r=l(63),i=l(4901);let o=[{path:"/",label:"首頁",icon:"fa-home"},{path:"/bulletin",label:"公告",icon:"fa-bullhorn"},{path:"/schedule",label:"課表",icon:"fa-table"},{path:"/calendar",label:"日程",icon:"fa-calendar-alt"},{path:"/homework",label:"作業",icon:"fa-clipboard-check"},{path:"/honor-roll",label:"榮譽榜",icon:"fa-trophy"},{path:"/seating",label:"座位",icon:"fa-border-all"},{path:"/gallery",label:"相簿",icon:"fa-images"},{path:"/graffiti",label:"塗鴉",icon:"fa-paint-brush"},{path:"/class-fund",label:"班費",icon:"fa-coins"},{path:"/violations",label:"常規",icon:"fa-user-clock"},{path:"/stories",label:"文章",icon:"fa-book-reader"},{path:"/fortune",label:"占卜",icon:"fa-star"},{path:"/polling",label:"投票",icon:"fa-check-to-slot"},{path:"/external-links",label:"連結",icon:"fa-link"}];function c(e){let{children:a}=e,l=(0,r.usePathname)(),{user:s,signOut:c}=(0,i.A)();return(0,t.jsxs)("div",{className:"w-full max-w-7xl mx-auto min-h-screen flex flex-col p-4 sm:p-6 lg:p-8",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm rounded-xl p-4 border border-slate-200 mb-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl sm:text-3xl font-extrabold text-slate-800 tracking-tight",children:[(0,t.jsx)("span",{className:"text-blue-600",children:"906"})," 親師平台"]}),(0,t.jsx)("p",{className:"text-slate-500 mt-1 text-xs sm:text-sm",children:"親師合作，共創未來 | 114學年度"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:s?(0,t.jsx)("button",{onClick:()=>c(),className:"px-3 py-1 rounded-lg text-sm font-medium bg-slate-100 text-slate-600 hover:bg-slate-200",children:"登出"}):(0,t.jsx)(n(),{href:"/login",className:"px-3 py-1 rounded-lg text-sm font-medium bg-blue-500 text-white hover:bg-blue-600",children:"登入"})})]})}),(0,t.jsx)("nav",{className:"sticky top-0 z-40 bg-white/95 backdrop-blur-sm border border-slate-200 rounded-xl p-2 mb-6 overflow-x-auto flex gap-2 -mx-4 px-4 sm:mx-0",children:o.map(e=>{let a=l===e.path;return(0,t.jsxs)(n(),{href:e.path,className:"whitespace-nowrap px-4 py-2 rounded-lg font-medium text-sm transition-all flex-shrink-0 ".concat(a?"bg-blue-100 text-blue-600 font-bold":"text-slate-600 hover:bg-slate-100"),children:[(0,t.jsx)("i",{className:"fas ".concat(e.icon," mr-1")}),e.label]},e.path)})}),(0,t.jsx)("main",{className:"flex-grow",children:a})]})}},4901:(e,a,l)=>{"use strict";l.d(a,{A:()=>u,AuthProvider:()=>c});var t=l(5155),s=l(2115),n=l(2553),r=l(9390),i=l(4585);let o=(0,s.createContext)(null);function c(e){let{children:a}=e,[l,c]=(0,s.useState)(null),[u,h]=(0,s.useState)(null),[d,b]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,n.hg)(i.j,async e=>{if(c(e),e){var a,l,t;let s=(await (0,r.x7)((0,r.H9)(i.db,"users",e.uid))).data();h({uid:e.uid,email:null!=(a=e.email)?a:null,role:null!=(l=null==s?void 0:s.role)?l:"student",displayName:null!=(t=e.displayName)?t:null==s?void 0:s.displayName})}else h(null);b(!1)});return()=>e()},[]);let m=async(e,a)=>{await (0,n.x9)(i.j,e,a)},p=async()=>{let e=new n.HF;await (0,n.df)(i.j,e)},x=async()=>{await (0,n.CI)(i.j),h(null)};return(0,t.jsx)(o.Provider,{value:{user:l,profile:u,loading:d,signIn:m,signInWithGoogle:p,signOut:x,hasRole:function(){for(var e=arguments.length,a=Array(e),l=0;l<e;l++)a[l]=arguments[l];return!!u&&a.includes(u.role)}},children:a})}function u(){let e=(0,s.useContext)(o);if(!e)throw Error("useAuth must be used within AuthProvider");return e}}},e=>{e.O(0,[978,399,563,320,619,441,255,358],()=>e(e.s=3671)),_N_E=e.O()}]);
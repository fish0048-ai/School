(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{3320:(e,s,t)=>{Promise.resolve().then(t.bind(t,9664))},4585:(e,s,t)=>{"use strict";t.d(s,{db:()=>i,j:()=>n});var a=t(2078),l=t(2553),r=t(9390);let d=(0,a.Wp)({apiKey:"AIzaSyDD_LVP9WTmEJP1ug68ajrFqQufu65X_BA",authDomain:"cish-906-school.firebaseapp.com",projectId:"cish-906-school",storageBucket:"cish-906-school.firebasestorage.app",messagingSenderId:"795413031258",appId:"1:795413031258:web:13c9916b84c07cd4dbeb63"}),n=(0,l.xI)(d),i=(0,r.aU)(d)},4901:(e,s,t)=>{"use strict";t.d(s,{A:()=>u,AuthProvider:()=>c});var a=t(5155),l=t(2115),r=t(2553),d=t(9390),n=t(4585);let i=(0,l.createContext)(null);function c(e){let{children:s}=e,[t,c]=(0,l.useState)(null),[u,o]=(0,l.useState)(null),[m,h]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=(0,r.hg)(n.j,async e=>{if(c(e),e){var s,t,a;let l=(await (0,d.x7)((0,d.H9)(n.db,"users",e.uid))).data();o({uid:e.uid,email:null!=(s=e.email)?s:null,role:null!=(t=null==l?void 0:l.role)?t:"student",displayName:null!=(a=e.displayName)?a:null==l?void 0:l.displayName})}else o(null);h(!1)});return()=>e()},[]);let x=async(e,s)=>{await (0,r.x9)(n.j,e,s)},f=async()=>{let e=new r.HF;await (0,r.df)(n.j,e)},b=async()=>{await (0,r.CI)(n.j),o(null)};return(0,a.jsx)(i.Provider,{value:{user:t,profile:u,loading:m,signIn:x,signInWithGoogle:f,signOut:b,hasRole:function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return!!u&&s.includes(u.role)}},children:s})}function u(){let e=(0,l.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},9664:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(5155),l=t(4901);function r(){let{hasRole:e}=(0,l.A)();return e("teacher","staff")?(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-sm border-t-4 border-emerald-500",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:[(0,a.jsx)("i",{className:"fas fa-coins text-emerald-500 mr-2"})," 班費收支"]}),(0,a.jsx)("p",{className:"text-slate-500",children:"班費列表（從 Firestore class_fund 讀取）"})]}):(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-sm border-t-4 border-emerald-500",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:[(0,a.jsx)("i",{className:"fas fa-coins text-emerald-500 mr-2"})," 班費收支"]}),(0,a.jsxs)("div",{className:"bg-emerald-50 p-6 rounded-xl border border-emerald-100 text-center",children:[(0,a.jsx)("i",{className:"fas fa-lock text-2xl text-emerald-600 mb-3"}),(0,a.jsx)("h3",{className:"font-bold text-slate-800 mb-3",children:"請登入後查看"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"班費功能需具備 teacher 或 staff 權限"})]})]})}}},e=>{e.O(0,[399,563,320,441,255,358],()=>e(e.s=3320)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[326],{4585:(e,s,a)=>{"use strict";a.d(s,{db:()=>c,j:()=>d});var t=a(2078),r=a(2553),l=a(9390);let i=(0,t.Wp)({apiKey:"AIzaSyDD_LVP9WTmEJP1ug68ajrFqQufu65X_BA",authDomain:"cish-906-school.firebaseapp.com",projectId:"cish-906-school",storageBucket:"cish-906-school.firebasestorage.app",messagingSenderId:"795413031258",appId:"1:795413031258:web:13c9916b84c07cd4dbeb63"}),d=(0,r.xI)(i),c=(0,l.aU)(i)},8769:(e,s,a)=>{Promise.resolve().then(a.bind(a,9015))},9015:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(5155),r=a(2115),l=a(9390),i=a(4585);function d(){let[e,s]=(0,r.useState)([]),[a,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(0,l.GG)((0,l.P)((0,l.rJ)(i.db,"polls"),(0,l.My)("due","desc"))).then(e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}).catch(console.error).finally(()=>d(!1))},[]),(0,t.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-sm border-t-4 border-pink-500",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:[(0,t.jsx)("i",{className:"fas fa-check-to-slot text-pink-500 mr-2"})," 投票區"]}),a?(0,t.jsx)("div",{className:"flex justify-center py-10",children:(0,t.jsx)("i",{className:"fas fa-circle-notch fa-spin text-4xl text-pink-500"})}):0===e.length?(0,t.jsx)("p",{className:"text-slate-500 py-6",children:"尚無投票。請於 Firestore polls 集合新增表單連結。"}):(0,t.jsx)("div",{className:"space-y-6",children:e.map(e=>(0,t.jsxs)("div",{className:"border border-pink-200 rounded-xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 bg-pink-50 flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"font-bold text-slate-800",children:e.title}),e.due&&(0,t.jsxs)("span",{className:"text-xs text-slate-500",children:["截止：",e.due]})]}),(0,t.jsx)("div",{className:"p-4",children:e.formUrl?(0,t.jsx)("iframe",{src:e.formUrl.replace("/viewform","/viewform?embedded=true"),width:"100%",height:"400",frameBorder:"0",marginHeight:0,marginWidth:0,title:e.title,className:"max-w-full rounded-lg"}):(0,t.jsxs)("a",{href:e.formUrl,target:"_blank",rel:"noopener noreferrer",className:"text-pink-600 hover:underline",children:["開啟表單 ",(0,t.jsx)("i",{className:"fas fa-external-link-alt text-xs ml-1"})]})})]},e.id))})]})}}},e=>{e.O(0,[399,563,320,441,255,358],()=>e(e.s=8769)),_N_E=e.O()}]);